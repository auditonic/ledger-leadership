(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[932],{55206:function(e,s,t){Promise.resolve().then(t.bind(t,53002)),Promise.resolve().then(t.bind(t,54120))},54120:function(e,s,t){"use strict";t.d(s,{default:function(){return eN}});var l=t(57437),i=t(2265),n=t(13287),a=t(14362),r=t(79820),d=t(12381),o=t(93448);function c(e){let{className:s,variant:t="default",...i}=e;return(0,l.jsx)("div",{className:(0,o.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","default"===t&&"border-transparent bg-primary text-primary-foreground hover:bg-primary/80","secondary"===t&&"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80","outline"===t&&"text-foreground","destructive"===t&&"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",s),...i})}var u=t(40279);let m=i.createContext(void 0),x=e=>{let{defaultValue:s,value:t,onValueChange:n,children:a,className:r}=e,[d,o]=i.useState(s||"");return(0,l.jsx)(m.Provider,{value:{value:void 0!==t?t:d,onValueChange:n||o},children:(0,l.jsx)("div",{className:r,children:a})})},h=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,l.jsx)("div",{ref:s,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...i})});h.displayName="TabsList";let f=i.forwardRef((e,s)=>{let{className:t,value:n,...a}=e,r=i.useContext(m),d=(null==r?void 0:r.value)===n;return(0,l.jsx)("button",{ref:s,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",d?"bg-background text-foreground shadow-sm":"text-muted-foreground",t),onClick:()=>null==r?void 0:r.onValueChange(n),...a})});f.displayName="TabsTrigger";let g=i.forwardRef((e,s)=>{let{className:t,value:n,...a}=e,r=i.useContext(m);return(null==r?void 0:r.value)!==n?null:(0,l.jsx)("div",{ref:s,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...a})});g.displayName="TabsContent";let p=i.forwardRef((e,s)=>{let{className:t,orientation:i="horizontal",...n}=e;return(0,l.jsx)("div",{ref:s,className:(0,o.cn)("shrink-0 bg-border","horizontal"===i?"h-[1px] w-full":"h-full w-[1px]",t),...n})});p.displayName="Separator";let v=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,l.jsx)("div",{className:"relative w-full overflow-auto",children:(0,l.jsx)("table",{ref:s,className:(0,o.cn)("w-full caption-bottom text-sm",t),...i})})});v.displayName="Table";let j=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,l.jsx)("thead",{ref:s,className:(0,o.cn)("[&_tr]:border-b",t),...i})});j.displayName="TableHeader";let b=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,l.jsx)("tbody",{ref:s,className:(0,o.cn)("[&_tr:last-child]:border-0",t),...i})});b.displayName="TableBody";let N=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,l.jsx)("tr",{ref:s,className:(0,o.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...i})});N.displayName="TableRow";let w=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,l.jsx)("th",{ref:s,className:(0,o.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...i})});w.displayName="TableHead";let y=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,l.jsx)("td",{ref:s,className:(0,o.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...i})});y.displayName="TableCell";let S=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,l.jsx)("textarea",{className:(0,o.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...i})});S.displayName="Textarea";let k=i.createContext(void 0),_=e=>{let{open:s,onOpenChange:t,children:n}=e,[a,r]=i.useState(!1),d=void 0!==s?s:a,o=t||r;return i.useEffect(()=>{void 0!==s&&r(s)},[s]),(0,l.jsx)(k.Provider,{value:{open:d,onOpenChange:o},children:d&&(0,l.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50",onClick:()=>o(!1)}),n]})})},C=i.forwardRef((e,s)=>{let{className:t,children:n,...a}=e;return i.useContext(k),(0,l.jsx)("div",{ref:s,className:(0,o.cn)("relative z-50 grid w-full max-w-lg gap-4 border bg-background p-6 shadow-lg duration-200 sm:rounded-lg",t),...a,children:n})});C.displayName="DialogContent";let Z=e=>{let{className:s,...t}=e;return(0,l.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};Z.displayName="DialogHeader";let R=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,l.jsx)("h2",{ref:s,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",t),...i})});R.displayName="DialogTitle";let O=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,l.jsx)("p",{ref:s,className:(0,o.cn)("text-sm text-muted-foreground",t),...i})});O.displayName="DialogDescription";let E=i.createContext(void 0),P=e=>{let{value:s,onValueChange:t,children:n}=e,[a,r]=i.useState(""),[d,o]=i.useState(!1);return(0,l.jsx)(E.Provider,{value:{value:void 0!==s?s:a,onValueChange:t||r,open:d,setOpen:o},children:(0,l.jsx)("div",{className:"relative",children:n})})},D=i.forwardRef((e,s)=>{let{className:t,children:n,...a}=e,r=i.useContext(E);return(0,l.jsxs)("button",{ref:s,type:"button",className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),onClick:()=>null==r?void 0:r.setOpen(!r.open),...a,children:[n,(0,l.jsx)("svg",{className:"h-4 w-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})});D.displayName="SelectTrigger";let I=e=>{let{placeholder:s}=e,t=i.useContext(E);return(0,l.jsx)("span",{children:(null==t?void 0:t.value)||s})},A=i.forwardRef((e,s)=>{let{className:t,children:n,...a}=e,r=i.useContext(E);return(null==r?void 0:r.open)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>r.setOpen(!1)}),(0,l.jsx)("div",{ref:s,className:(0,o.cn)("absolute z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md",t),...a,children:n})]}):null});A.displayName="SelectContent";let T=i.forwardRef((e,s)=>{let{className:t,value:n,children:a,...r}=e,d=i.useContext(E);return(0,l.jsx)("div",{ref:s,className:(0,o.cn)("relative flex w-full cursor-pointer select-none items-center rounded-sm py-1.5 px-2 text-sm outline-none hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground",(null==d?void 0:d.value)===n&&"bg-accent text-accent-foreground",t),onClick:()=>{null==d||d.onValueChange(n),null==d||d.setOpen(!1)},...r,children:a})});T.displayName="SelectItem";var L=t(89337),U=t(63639),z=t(91723),B=t(42488),M=t(13781),Y=t(66901),q=t(82023),F=t(88906),K=t(89345),H=t(99801),G=t(25466),V=t(29525),W=t(61341),X=t(50091),J=t(26748),Q=t(46221),$=t(47625),ee=t(58336),es=t(56940),et=t(97059),el=t(62994),ei=t(8147),en=t(54061);let ea={initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.35}};function er(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return s.filter(Boolean).join(" ")}function ed(e){let s={ok:{label:"OK",icon:L.Z,className:"bg-emerald-600 text-white"},warn:{label:"Attention",icon:U.Z,className:"bg-amber-500 text-white"},down:{label:"Down",icon:U.Z,className:"bg-red-600 text-white"},unknown:{label:"Unknown",icon:z.Z,className:"bg-muted text-foreground"}};return s[e]||s.unknown}function eo(e){return({reality:"Reality",obligation:"Obligation",continuity:"Continuity",margin:"Margin",reconciliation:"Reconciliation"})[e||""]||e||"—"}let ec={health:{ok:!1,checks:{netlify:{status:"ok",detail:"Deploy channel reachable"},github:{status:"ok",detail:"Repo connected"},supabase:{status:"warn",detail:"Schema pending / RLS not configured"},gmail:{status:"unknown",detail:"Not connected"},auth:{status:"warn",detail:"Auth not enabled"}},updated_at:new Date().toISOString()},metrics:{uptime_24h:99.92,submissions_7d:7,review_queue:3,published_total:12,sparkline:Array.from({length:24}).map((e,s)=>({hour:"".concat(String(s).padStart(2,"0"),":00"),latency_ms:Math.round(120+30*Math.sin(s/3)+20*Math.random())}))},submissions:[{id:"a1",created_at:new Date(Date.now()-216e5).toISOString(),edge:"reality",attribution:"anonymous",publish_status:"submitted",role:"Product Lead",org_context:"Growth team",situation:"Leadership kept getting pulled into prioritization decisions for small changes.",applied:"Asked the two questions; moved decision ownership to the on-call product owner.",result:"Escalations dropped; clearer decision boundary.",unclear:"How to handle cross-team tradeoffs without meetings.",public_role:null,public_context:null},{id:"b2",created_at:new Date(Date.now()-792e5).toISOString(),edge:"margin",attribution:"featured",publish_status:"reviewing",role:"Ops Manager",org_context:"Support org",situation:"Too many meetings to align simple handoffs.",applied:"Stopped work until ownership was explicit; replaced meeting with written handoff template.",result:"Meeting count fell; handoffs improved.",unclear:"How to enforce template adoption without policing.",public_role:"Ops Manager",public_context:"Support org"},{id:"c3",created_at:new Date(Date.now()-18e7).toISOString(),edge:"continuity",attribution:"featured",publish_status:"published",role:"Engineering Manager",org_context:"Platform",situation:"Incidents escalated to leadership every weekend.",applied:"Moved incident decision rights to the incident commander; clarified escalation triggers.",result:"Leadership involvement reduced; faster resolution.",unclear:null,public_role:"Engineering Manager",public_context:"Platform"}],gmail:{query:"",messages:[{id:"m1",from:"Contrib <someone@example.com>",subject:"Field note submission — Margin Edge",snippet:"I tried the rule about not starting work without ownership…",date:"Today"},{id:"m2",from:"Podcast Host <host@pod.example>",subject:"Invite: Ledger Leadership discussion",snippet:"Would love to have you on the show…",date:"Yesterday"}],active:null}};async function eu(e){try{return await e.json()}catch(e){return null}}async function em(){try{let{supabase:e}=await Promise.resolve().then(t.bind(t,5526)),{data:{session:s}}=await e.auth.getSession();return(null==s?void 0:s.access_token)||null}catch(e){return null}}async function ex(e,s){let{fallback:t}=s;try{let s=await em(),l={};s&&(l.Authorization="Bearer ".concat(s));let i=await fetch(e,{headers:l});if(!i.ok)throw Error(await i.text());let n=await eu(i);return null!=n?n:t}catch(e){return t}}async function eh(e,s,t){let{fallback:l}=t;try{let t=await em(),i={"Content-Type":"application/json"};t&&(i.Authorization="Bearer ".concat(t));let n=await fetch(e,{method:"POST",headers:i,body:JSON.stringify(s)});if(!n.ok)throw Error(await n.text());let a=await eu(n);return null!=a?a:l}catch(e){return l}}function ef(e){let{label:s,status:t,detail:i,icon:n}=e,a=ed(t),r=a.icon;return(0,l.jsxs)("div",{className:"flex items-center justify-between gap-3 py-2",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"h-9 w-9 rounded-xl bg-muted flex items-center justify-center",children:(0,l.jsx)(n,{className:"h-4 w-4"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm font-semibold",children:s}),(0,l.jsx)("div",{className:"text-xs text-muted-foreground",children:i})]})]}),(0,l.jsxs)(c,{className:er("gap-1",a.className),children:[(0,l.jsx)(r,{className:"h-3.5 w-3.5"}),a.label]})]})}function eg(e){let{title:s,value:t,hint:i,icon:n}=e;return(0,l.jsx)(r.Zb,{className:"rounded-2xl",children:(0,l.jsx)(r.aY,{className:"p-5",children:(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:s}),(0,l.jsx)("div",{className:"text-2xl font-semibold mt-1",children:t}),(0,l.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:i})]}),(0,l.jsx)("div",{className:"h-10 w-10 rounded-2xl bg-muted flex items-center justify-center",children:(0,l.jsx)(n,{className:"h-5 w-5"})})]})})})}function ep(e){let{data:s}=e;return(0,l.jsxs)(r.Zb,{className:"rounded-2xl",children:[(0,l.jsxs)(r.Ol,{children:[(0,l.jsxs)(r.ll,{className:"flex items-center gap-2",children:[(0,l.jsx)(B.Z,{className:"h-4 w-4"}),"Latency (last 24h)"]}),(0,l.jsx)(r.SZ,{children:"Signals for uptime and response drift (illustrative until wired)."})]}),(0,l.jsx)(r.aY,{className:"h-[260px]",children:(0,l.jsx)($.h,{width:"100%",height:"100%",children:(0,l.jsxs)(ee.w,{data:s,margin:{top:10,right:18,left:0,bottom:0},children:[(0,l.jsx)(es.q,{strokeDasharray:"3 3"}),(0,l.jsx)(et.K,{dataKey:"hour",tick:{fontSize:11},interval:3}),(0,l.jsx)(el.B,{tick:{fontSize:11},width:40}),(0,l.jsx)(ei.u,{}),(0,l.jsx)(en.x,{type:"monotone",dataKey:"latency_ms",strokeWidth:2,dot:!1})]})})})]})}function ev(e){let{deployments:s}=e,t=s||[{id:"1",commit:"c9a19a4",status:"success",stages:["build","test","deploy","verify"],timestamp:new Date(Date.now()-3e5)},{id:"2",commit:"3b30fc4",status:"success",stages:["build","test","deploy","verify"],timestamp:new Date(Date.now()-9e5)},{id:"3",commit:"6f836fe",status:"failed",stages:["build","test"],failedStage:"test",timestamp:new Date(Date.now()-18e5)},{id:"4",commit:"144adda",status:"success",stages:["build","test","deploy","verify"],timestamp:new Date(Date.now()-36e5)}],n={build:"Build",test:"Test",deploy:"Deploy",verify:"Verify"},a=(e,s)=>{if(e.failedStage===s)return"failed";let t=e.stages.indexOf(s),l=e.stages.indexOf(e.failedStage||"");return -1!==l&&t>l?"pending":"success"===e.status||t<e.stages.length?"success":"pending"},d=e=>{switch(e){case"success":return"bg-emerald-500";case"failed":return"bg-red-500";default:return"bg-gray-300"}},o=t[0];return(0,l.jsxs)(r.Zb,{className:"rounded-2xl",children:[(0,l.jsxs)(r.Ol,{children:[(0,l.jsxs)(r.ll,{className:"flex items-center gap-2",children:[(0,l.jsx)(M.Z,{className:"h-4 w-4"}),"Deployment Pipeline"]}),(0,l.jsx)(r.SZ,{children:"Recent deployment status and pipeline visualization"})]}),(0,l.jsxs)(r.aY,{className:"p-5 space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,l.jsxs)("div",{className:"text-sm font-semibold",children:["Latest: ",o.commit]}),(0,l.jsx)(c,{className:er("rounded-xl","success"===o.status?"bg-emerald-600 text-white":"bg-red-600 text-white"),children:"success"===o.status?"Success":"Failed"})]}),(0,l.jsx)("div",{className:"flex items-center gap-2",children:["build","test","deploy","verify"].map((e,s)=>{let t=a(o,e);return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("div",{className:er("h-10 w-10 rounded-full flex items-center justify-center text-white text-xs font-semibold",d(t)),children:"success"===t?(0,l.jsx)(Y.Z,{className:"h-5 w-5"}):"failed"===t?(0,l.jsx)(U.Z,{className:"h-5 w-5"}):(0,l.jsx)(z.Z,{className:"h-5 w-5"})}),(0,l.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:n[e]})]}),3!==s&&(0,l.jsx)("div",{className:er("h-1 flex-1","failed"===t?"bg-red-500":"success"===t?"bg-emerald-500":"bg-gray-300")})]},e)})}),o.failedStage&&(0,l.jsxs)("div",{className:"mt-2 text-xs text-red-600",children:["Failed at: ",n[o.failedStage]]})]}),(0,l.jsx)(p,{}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("div",{className:"text-xs font-semibold text-muted-foreground",children:"Recent Deployments"}),t.slice(0,3).map(e=>(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:er("h-2 w-2 rounded-full","success"===e.status?"bg-emerald-500":"bg-red-500")}),(0,l.jsx)("span",{className:"font-mono text-xs",children:e.commit}),(0,l.jsx)("span",{className:"text-xs text-muted-foreground",children:e.timestamp.toLocaleTimeString()})]}),(0,l.jsx)(c,{variant:"outline",className:"text-xs",children:e.status})]},e.id))]})]})]})}function ej(e){let{open:s,onOpenChange:t,row:n,onUpdateStatus:a}=e,[o,m]=(0,i.useState)(""),[x,h]=(0,i.useState)(""),[f,g]=(0,i.useState)("reviewing"),[v,j]=(0,i.useState)(!1);(0,i.useEffect)(()=>{n&&(m(n.public_role||n.role||""),h(n.public_context||n.org_context||""),g(n.publish_status||"reviewing"))},[n]);let b=(null==n?void 0:n.attribution)!=="private";return(0,l.jsx)(_,{open:s,onOpenChange:t,children:(0,l.jsxs)(C,{className:"max-w-3xl rounded-2xl",children:[(0,l.jsxs)(Z,{children:[(0,l.jsxs)(R,{className:"flex items-center gap-2",children:[(0,l.jsx)(q.Z,{className:"h-5 w-5"}),"Field Note Review"]}),(0,l.jsx)(O,{children:"Promote to published only when it’s tight, non-identifying (if anonymous), and teaches the edge."})]}),n?(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,l.jsx)(r.Zb,{className:"rounded-2xl lg:col-span-2",children:(0,l.jsxs)(r.aY,{className:"p-5 space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)(c,{variant:"secondary",className:"rounded-xl",children:[eo(n.edge)," Edge"]}),(0,l.jsx)(c,{variant:"outline",className:"rounded-xl",children:n.attribution}),(0,l.jsx)(c,{className:er("rounded-xl","published"===n.publish_status?"bg-emerald-600 text-white":"reviewing"===n.publish_status?"bg-amber-500 text-white":"rejected"===n.publish_status?"bg-red-600 text-white":"bg-muted text-foreground"),children:n.publish_status})]}),(0,l.jsx)("div",{className:"text-xs text-muted-foreground",children:new Date(n.created_at).toLocaleString()})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-xs font-semibold text-muted-foreground",children:"Situation"}),(0,l.jsx)("div",{className:"text-sm mt-1",children:n.situation})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-xs font-semibold text-muted-foreground",children:"What they did"}),(0,l.jsx)("div",{className:"text-sm mt-1",children:n.applied})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-xs font-semibold text-muted-foreground",children:"What happened"}),(0,l.jsx)("div",{className:"text-sm mt-1",children:n.result})]}),n.unclear?(0,l.jsxs)("div",{className:"rounded-2xl bg-muted p-4",children:[(0,l.jsx)("div",{className:"text-xs font-semibold text-muted-foreground",children:"Still unclear"}),(0,l.jsx)("div",{className:"text-sm mt-1",children:n.unclear})]}):null]})}),(0,l.jsxs)(r.Zb,{className:"rounded-2xl",children:[(0,l.jsxs)(r.Ol,{children:[(0,l.jsx)(r.ll,{className:"text-base",children:"Publish controls"}),(0,l.jsx)(r.SZ,{children:"Curate attribution and visibility."})]}),(0,l.jsxs)(r.aY,{className:"p-5 space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("div",{className:"text-xs font-semibold text-muted-foreground",children:"Next status"}),(0,l.jsxs)(P,{value:f,onValueChange:g,children:[(0,l.jsx)(D,{className:"rounded-2xl",children:(0,l.jsx)(I,{placeholder:"Select"})}),(0,l.jsxs)(A,{children:[(0,l.jsx)(T,{value:"submitted",children:"submitted"}),(0,l.jsx)(T,{value:"reviewing",children:"reviewing"}),b?(0,l.jsx)(T,{value:"published",children:"published"}):null,(0,l.jsx)(T,{value:"rejected",children:"rejected"})]})]}),b?null:(0,l.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center gap-2",children:[(0,l.jsx)(F.Z,{className:"h-3.5 w-3.5"}),"Private notes cannot be published."]})]}),(0,l.jsx)(p,{}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("div",{className:"text-xs font-semibold text-muted-foreground",children:"Public role (optional)"}),(0,l.jsx)(u.I,{className:"rounded-2xl",value:o,onChange:e=>m(e.target.value),placeholder:"e.g., Ops Manager"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("div",{className:"text-xs font-semibold text-muted-foreground",children:"Public context (optional)"}),(0,l.jsx)(S,{className:"rounded-2xl min-h-[88px]",value:x,onChange:e=>h(e.target.value),placeholder:"e.g., Support org"})]}),(0,l.jsxs)(d.z,{className:"w-full rounded-2xl",disabled:v,onClick:async()=>{j(!0);try{await a({id:n.id,publish_status:f,public_role:o||null,public_context:x||null}),t(!1)}finally{j(!1)}},children:[(0,l.jsx)(Y.Z,{className:"h-4 w-4 mr-2"}),"Save"]})]})]})]}):(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:"No selection."})]})})}function eb(e){let{initial:s}=e,[t,n]=(0,i.useState)(s.query||""),[a,o]=(0,i.useState)(s.messages||[]),[c,m]=(0,i.useState)(s.active),[x,h]=(0,i.useState)(!1),f=async()=>{h(!0);try{let e=await ex("/.netlify/functions/llops-gmail-search?query=".concat(encodeURIComponent(t)),{fallback:{ok:!0,messages:s.messages}});o((null==e?void 0:e.messages)||[]),m(null)}finally{h(!1)}},g=async e=>{h(!0);try{let s=await ex("/.netlify/functions/llops-gmail-read?id=".concat(encodeURIComponent(e)),{fallback:{ok:!0,message:{id:e,subject:"Preview (stub)",body:"Connect Gmail toolchain to render content."}}});m((null==s?void 0:s.message)||null)}finally{h(!1)}};return(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,l.jsxs)(r.Zb,{className:"rounded-2xl lg:col-span-1",children:[(0,l.jsxs)(r.Ol,{children:[(0,l.jsxs)(r.ll,{className:"flex items-center gap-2",children:[(0,l.jsx)(K.Z,{className:"h-4 w-4"}),"Inbox"]}),(0,l.jsx)(r.SZ,{children:"Requires server-side Gmail OAuth; this UI is ready for wiring."})]}),(0,l.jsxs)(r.aY,{className:"p-5 space-y-3",children:[(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(u.I,{className:"rounded-2xl",value:t,onChange:e=>n(e.target.value),placeholder:'Search (e.g., "subject:Field note")'}),(0,l.jsx)(d.z,{className:"rounded-2xl",onClick:f,disabled:x,children:"Search"})]}),(0,l.jsx)(p,{}),(0,l.jsxs)("div",{className:"space-y-2 max-h-[520px] overflow-auto pr-1",children:[a.map(e=>(0,l.jsxs)("button",{onClick:()=>g(e.id),className:er("w-full text-left rounded-2xl border p-3 hover:bg-muted transition",(null==c?void 0:c.id)===e.id?"bg-muted":"bg-background"),children:[(0,l.jsx)("div",{className:"text-sm font-semibold",children:e.subject}),(0,l.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:e.from}),(0,l.jsx)("div",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:e.snippet}),(0,l.jsx)("div",{className:"text-[11px] text-muted-foreground mt-2",children:e.date})]},e.id)),a.length?null:(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:"No messages."})]})]})]}),(0,l.jsxs)(r.Zb,{className:"rounded-2xl lg:col-span-2",children:[(0,l.jsxs)(r.Ol,{children:[(0,l.jsxs)(r.ll,{className:"flex items-center gap-2",children:[(0,l.jsx)(H.Z,{className:"h-4 w-4"}),"Message"]}),(0,l.jsx)(r.SZ,{children:"Read-only viewer (server-side fetch recommended)."})]}),(0,l.jsx)(r.aY,{className:"p-5",children:c?(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)("div",{className:"text-lg font-semibold",children:c.subject}),(0,l.jsx)("div",{className:"text-xs text-muted-foreground",children:c.from}),(0,l.jsx)(p,{}),(0,l.jsx)("div",{className:"text-sm whitespace-pre-wrap",children:c.body||c.snippet})]}):(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:"Select a message to read."})})]})]})}function eN(){var e,s,t,o,m,S,k,_,C,Z,R,O,E,U,Y,$,ee,es,et,el,ei,en,eu,em,eN,ew,ey,eS;let ek=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6e4,[s,t]=(0,i.useState)(()=>new Date);return(0,i.useEffect)(()=>{let s=setInterval(()=>t(new Date),e);return()=>clearInterval(s)},[e]),s}(3e4),{user:e_,signOut:eC}=(0,a.a)(),[eZ,eR]=(0,i.useState)(ec.health),[eO,eE]=(0,i.useState)(ec.metrics),[eP,eD]=(0,i.useState)(ec.submissions),[eI,eA]=(0,i.useState)("submitted"),[eT,eL]=(0,i.useState)(""),[eU,ez]=(0,i.useState)(null),[eB,eM]=(0,i.useState)(!1);(0,i.useEffect)(()=>{(async()=>{let e=await ex("/.netlify/functions/llops-health",{fallback:ec.health}),s=await ex("/.netlify/functions/llops-metrics",{fallback:ec.metrics});eR(e||ec.health),eE(s||ec.metrics)})()},[ek]),(0,i.useEffect)(()=>{(async()=>{let e=await ex("/.netlify/functions/llops-submissions?status=".concat(encodeURIComponent(eI)),{fallback:{ok:!0,submissions:ec.submissions.filter(e=>e.publish_status===eI)}}),s=(null==e?void 0:e.submissions)||[];eD(s.length?s:"all"===eI?ec.submissions:ec.submissions.filter(e=>e.publish_status===eI))})()},[eI]);let eY=(0,i.useMemo)(()=>{let e=eT.trim().toLowerCase();return e?eP.filter(s=>[s.situation,s.applied,s.result,s.role,s.org_context,s.edge,s.attribution].filter(Boolean).some(s=>String(s).toLowerCase().includes(e))):eP},[eP,eT]),eq=ed((0,i.useMemo)(()=>{let e=Object.values((null==eZ?void 0:eZ.checks)||{}).map(e=>(null==e?void 0:e.status)||"unknown");return e.includes("down")?"down":e.includes("warn")?"warn":e.every(e=>"ok"===e)?"ok":"unknown"},[eZ])),eF=eq.icon,eK=async e=>{eD(s=>s.map(s=>s.id===e.id?{...s,...e}:s)),await eh("/.netlify/functions/llops-update-status",e,{fallback:{ok:!0}});let s=await ex("/.netlify/functions/llops-submissions?status=".concat(encodeURIComponent(eI)),{fallback:{ok:!0,submissions:ec.submissions.filter(e=>e.publish_status===eI)}});(null==s?void 0:s.submissions)&&eD(s.submissions)};return(0,l.jsx)("div",{className:"min-h-screen bg-background",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:[(0,l.jsxs)(n.E.div,{...ea,className:"flex items-start justify-between gap-3 flex-wrap",children:[(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"h-11 w-11 rounded-2xl bg-muted flex items-center justify-center",children:(0,l.jsx)(G.Z,{className:"h-5 w-5"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-xl font-semibold",children:"LLOps Control Center"}),(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:"Operational command center for LedgerLeadership.com"})]})]})}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)(c,{className:er("rounded-xl gap-1",eq.className),children:[(0,l.jsx)(eF,{className:"h-3.5 w-3.5"}),eq.label]}),(0,l.jsxs)(c,{variant:"outline",className:"rounded-xl",children:[(0,l.jsx)(z.Z,{className:"h-3.5 w-3.5 mr-1"}),ek.toLocaleTimeString()]}),e_&&(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(c,{variant:"outline",className:"rounded-xl",children:e_.email||e_.id.slice(0,8)}),(0,l.jsx)(d.z,{variant:"ghost",size:"sm",onClick:eC,children:"Sign Out"})]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 mt-6",children:[(0,l.jsxs)(n.E.div,{...ea,className:"lg:col-span-3 space-y-4",children:[(0,l.jsxs)(r.Zb,{className:"rounded-2xl",children:[(0,l.jsxs)(r.Ol,{children:[(0,l.jsxs)(r.ll,{className:"flex items-center gap-2",children:[(0,l.jsx)(V.Z,{className:"h-4 w-4"}),"System status"]}),(0,l.jsx)(r.SZ,{children:"Core integration checks"})]}),(0,l.jsx)(r.aY,{className:"p-5",children:(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)(ef,{label:"Netlify",status:(null==eZ?void 0:null===(s=eZ.checks)||void 0===s?void 0:null===(e=s.netlify)||void 0===e?void 0:e.status)||"unknown",detail:(null==eZ?void 0:null===(o=eZ.checks)||void 0===o?void 0:null===(t=o.netlify)||void 0===t?void 0:t.detail)||"—",icon:W.Z}),(0,l.jsx)(p,{}),(0,l.jsx)(ef,{label:"GitHub",status:(null==eZ?void 0:null===(S=eZ.checks)||void 0===S?void 0:null===(m=S.github)||void 0===m?void 0:m.status)||"unknown",detail:(null==eZ?void 0:null===(_=eZ.checks)||void 0===_?void 0:null===(k=_.github)||void 0===k?void 0:k.detail)||"—",icon:M.Z}),(0,l.jsx)(p,{}),(0,l.jsx)(ef,{label:"Supabase",status:(null==eZ?void 0:null===(Z=eZ.checks)||void 0===Z?void 0:null===(C=Z.supabase)||void 0===C?void 0:C.status)||"unknown",detail:(null==eZ?void 0:null===(O=eZ.checks)||void 0===O?void 0:null===(R=O.supabase)||void 0===R?void 0:R.detail)||"—",icon:X.Z}),(0,l.jsx)(p,{}),(0,l.jsx)(ef,{label:"Gmail",status:(null==eZ?void 0:null===(U=eZ.checks)||void 0===U?void 0:null===(E=U.gmail)||void 0===E?void 0:E.status)||"unknown",detail:(null==eZ?void 0:null===($=eZ.checks)||void 0===$?void 0:null===(Y=$.gmail)||void 0===Y?void 0:Y.detail)||"—",icon:K.Z}),(0,l.jsx)(p,{}),(0,l.jsx)(ef,{label:"Auth",status:(null==eZ?void 0:null===(es=eZ.checks)||void 0===es?void 0:null===(ee=es.auth)||void 0===ee?void 0:ee.status)||"unknown",detail:(null==eZ?void 0:null===(el=eZ.checks)||void 0===el?void 0:null===(et=el.auth)||void 0===et?void 0:et.detail)||"—",icon:J.Z})]})})]}),(0,l.jsxs)(r.Zb,{className:"rounded-2xl",children:[(0,l.jsxs)(r.Ol,{children:[(0,l.jsxs)(r.ll,{className:"flex items-center gap-2",children:[(0,l.jsx)(Q.Z,{className:"h-4 w-4"}),"Key signals"]}),(0,l.jsx)(r.SZ,{children:"Small set of operational indicators"})]}),(0,l.jsxs)(r.aY,{className:"p-5 grid grid-cols-1 gap-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:"Uptime (24h)"}),(0,l.jsxs)("div",{className:"font-semibold",children:[null!==(ei=null==eO?void 0:eO.uptime_24h)&&void 0!==ei?ei:"—","%"]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:"Submissions (7d)"}),(0,l.jsx)("div",{className:"font-semibold",children:null!==(en=null==eO?void 0:eO.submissions_7d)&&void 0!==en?en:"—"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:"Review queue"}),(0,l.jsx)("div",{className:"font-semibold",children:null!==(eu=null==eO?void 0:eO.review_queue)&&void 0!==eu?eu:"—"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:"Published total"}),(0,l.jsx)("div",{className:"font-semibold",children:null!==(em=null==eO?void 0:eO.published_total)&&void 0!==em?em:"—"})]}),(0,l.jsx)(p,{}),(0,l.jsx)("div",{className:"text-xs text-muted-foreground",children:"Keep metrics minimal. If a number doesn’t change decisions, remove it."})]})]})]}),(0,l.jsx)(n.E.div,{...ea,className:"lg:col-span-9",children:(0,l.jsxs)(x,{defaultValue:"overview",className:"w-full",children:[(0,l.jsxs)(h,{className:"w-full justify-start rounded-2xl",children:[(0,l.jsxs)(f,{value:"overview",className:"rounded-2xl",children:[(0,l.jsx)(G.Z,{className:"h-4 w-4 mr-2"}),"Overview"]}),(0,l.jsxs)(f,{value:"submissions",className:"rounded-2xl",children:[(0,l.jsx)(H.Z,{className:"h-4 w-4 mr-2"}),"Submissions"]}),(0,l.jsxs)(f,{value:"review",className:"rounded-2xl",children:[(0,l.jsx)(q.Z,{className:"h-4 w-4 mr-2"}),"Review & Publish"]}),(0,l.jsxs)(f,{value:"gmail",className:"rounded-2xl",children:[(0,l.jsx)(K.Z,{className:"h-4 w-4 mr-2"}),"Gmail"]}),(0,l.jsxs)(f,{value:"security",className:"rounded-2xl",children:[(0,l.jsx)(F.Z,{className:"h-4 w-4 mr-2"}),"Security"]})]}),(0,l.jsxs)(g,{value:"overview",className:"mt-4 space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:[(0,l.jsx)(eg,{title:"Uptime (24h)",value:"".concat(null!==(eN=null==eO?void 0:eO.uptime_24h)&&void 0!==eN?eN:"—","%"),hint:"Target: > 99.9%",icon:B.Z}),(0,l.jsx)(eg,{title:"Submissions (7d)",value:null!==(ew=null==eO?void 0:eO.submissions_7d)&&void 0!==ew?ew:"—",hint:"Signals adoption",icon:H.Z}),(0,l.jsx)(eg,{title:"Review queue",value:null!==(ey=null==eO?void 0:eO.review_queue)&&void 0!==ey?ey:"—",hint:"Keep < 10",icon:q.Z}),(0,l.jsx)(eg,{title:"Published",value:null!==(eS=null==eO?void 0:eO.published_total)&&void 0!==eS?eS:"—",hint:"Evidence library",icon:L.Z})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,l.jsx)(ep,{data:(null==eO?void 0:eO.sparkline)||ec.metrics.sparkline}),(0,l.jsx)(ev,{deployments:null==eO?void 0:eO.deployments})]})]}),(0,l.jsxs)(g,{value:"submissions",className:"mt-4 space-y-4",children:[(0,l.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)(P,{value:eI,onValueChange:eA,children:[(0,l.jsx)(D,{className:"rounded-2xl w-[180px]",children:(0,l.jsx)(I,{placeholder:"Status"})}),(0,l.jsxs)(A,{children:[(0,l.jsx)(T,{value:"submitted",children:"submitted"}),(0,l.jsx)(T,{value:"reviewing",children:"reviewing"}),(0,l.jsx)(T,{value:"published",children:"published"}),(0,l.jsx)(T,{value:"rejected",children:"rejected"}),(0,l.jsx)(T,{value:"all",children:"all"})]})]}),(0,l.jsx)(u.I,{className:"rounded-2xl w-[260px]",placeholder:"Search submissions",value:eT,onChange:e=>eL(e.target.value)})]}),(0,l.jsxs)("div",{className:"ml-auto text-xs text-muted-foreground",children:[eY.length," items"]})]}),(0,l.jsxs)(r.Zb,{className:"rounded-2xl",children:[(0,l.jsxs)(r.Ol,{children:[(0,l.jsxs)(r.ll,{className:"flex items-center gap-2",children:[(0,l.jsx)(H.Z,{className:"h-4 w-4"}),"Queue"]}),(0,l.jsx)(r.SZ,{children:"Click a row to open review."})]}),(0,l.jsx)(r.aY,{className:"p-0",children:(0,l.jsxs)(v,{children:[(0,l.jsx)(j,{children:(0,l.jsxs)(N,{children:[(0,l.jsx)(w,{children:"Date"}),(0,l.jsx)(w,{children:"Edge"}),(0,l.jsx)(w,{children:"Attribution"}),(0,l.jsx)(w,{children:"Status"}),(0,l.jsx)(w,{className:"hidden md:table-cell",children:"Situation"})]})}),(0,l.jsxs)(b,{children:[eY.map(e=>(0,l.jsxs)(N,{className:"cursor-pointer",onClick:()=>{ez(e),eM(!0)},children:[(0,l.jsx)(y,{className:"text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleDateString()}),(0,l.jsx)(y,{children:(0,l.jsx)(c,{variant:"secondary",className:"rounded-xl",children:eo(e.edge)})}),(0,l.jsx)(y,{children:(0,l.jsx)(c,{variant:"outline",className:"rounded-xl",children:e.attribution})}),(0,l.jsx)(y,{children:(0,l.jsx)(c,{className:er("rounded-xl","published"===e.publish_status?"bg-emerald-600 text-white":"reviewing"===e.publish_status?"bg-amber-500 text-white":"rejected"===e.publish_status?"bg-red-600 text-white":"bg-muted text-foreground"),children:e.publish_status})}),(0,l.jsx)(y,{className:"hidden md:table-cell max-w-[520px]",children:(0,l.jsx)("div",{className:"text-sm line-clamp-1",children:e.situation})})]},e.id)),eY.length?null:(0,l.jsx)(N,{children:(0,l.jsx)(y,{colSpan:5,className:"text-sm text-muted-foreground py-10 text-center",children:"No submissions."})})]})]})})]}),(0,l.jsx)(ej,{open:eB,onOpenChange:eM,row:eU,onUpdateStatus:eK})]}),(0,l.jsx)(g,{value:"review",className:"mt-4 space-y-4",children:(0,l.jsxs)(r.Zb,{className:"rounded-2xl",children:[(0,l.jsxs)(r.Ol,{children:[(0,l.jsxs)(r.ll,{className:"flex items-center gap-2",children:[(0,l.jsx)(q.Z,{className:"h-4 w-4"}),"Review workflow"]}),(0,l.jsx)(r.SZ,{children:"Operationally simple: submitted → reviewing → published."})]}),(0,l.jsxs)(r.aY,{className:"p-5 grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,l.jsxs)("div",{className:"rounded-2xl border p-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 font-semibold",children:[(0,l.jsx)(z.Z,{className:"h-4 w-4"}),"1) Triage"]}),(0,l.jsx)("div",{className:"text-xs text-muted-foreground mt-2",children:"Confirm edge + clarity. Private notes never publish."})]}),(0,l.jsxs)("div",{className:"rounded-2xl border p-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 font-semibold",children:[(0,l.jsx)(q.Z,{className:"h-4 w-4"}),"2) Tighten"]}),(0,l.jsx)("div",{className:"text-xs text-muted-foreground mt-2",children:"Add public role/context. Remove identifying detail."})]}),(0,l.jsxs)("div",{className:"rounded-2xl border p-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 font-semibold",children:[(0,l.jsx)(L.Z,{className:"h-4 w-4"}),"3) Publish"]}),(0,l.jsxs)("div",{className:"text-xs text-muted-foreground mt-2",children:["Set status to ",(0,l.jsx)("code",{children:"published"}),". Site surfaces it."]})]})]})]})}),(0,l.jsx)(g,{value:"gmail",className:"mt-4",children:(0,l.jsx)(eb,{initial:ec.gmail})}),(0,l.jsx)(g,{value:"security",className:"mt-4 space-y-4",children:(0,l.jsxs)(r.Zb,{className:"rounded-2xl",children:[(0,l.jsxs)(r.Ol,{children:[(0,l.jsxs)(r.ll,{className:"flex items-center gap-2",children:[(0,l.jsx)(F.Z,{className:"h-4 w-4"}),"Security posture"]}),(0,l.jsx)(r.SZ,{children:"Supabase Auth + roles, Netlify Functions as the enforcement layer."})]}),(0,l.jsxs)(r.aY,{className:"p-5 grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{className:"rounded-2xl border p-4",children:[(0,l.jsxs)("div",{className:"font-semibold flex items-center gap-2",children:[(0,l.jsx)(J.Z,{className:"h-4 w-4"}),"Auth + user management"]}),(0,l.jsx)("div",{className:"text-xs text-muted-foreground mt-2",children:"Supabase Auth (magic link). Profiles table with role. Enforce in functions."})]}),(0,l.jsxs)("div",{className:"rounded-2xl border p-4",children:[(0,l.jsxs)("div",{className:"font-semibold flex items-center gap-2",children:[(0,l.jsx)(X.Z,{className:"h-4 w-4"}),"RLS policy"]}),(0,l.jsx)("div",{className:"text-xs text-muted-foreground mt-2",children:"Public reads only for published. All writes via server functions."})]})]})]})})]})})]}),(0,l.jsx)("div",{className:"mt-10 text-xs text-muted-foreground",children:"Ship this behind auth and keep it boring. Fewer knobs = more uptime."})]})})}},53002:function(e,s,t){"use strict";t.d(s,{default:function(){return r}});var l=t(57437),i=t(2265),n=t(99376),a=t(14362);function r(e){let{children:s,requiredRole:t="user",fallback:r}=e,{user:d,loading:o}=(0,a.a)(),c=(0,n.useRouter)();if((0,i.useEffect)(()=>{if(!o){if(!d){c.push("/login?redirect="+encodeURIComponent(window.location.pathname));return}if("user"!==t&&d.profile){let e={user:1,reviewer:2,admin:3};if((e[d.profile.role]||0)<e[t]){c.push("/unauthorized");return}}}},[d,o,t,c]),o)return r||(0,l.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"mb-4 h-8 w-8 animate-spin rounded-full border-4 border-gray-300 border-t-blue-600 mx-auto"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})});if(!d)return null;if("user"!==t&&d.profile){let e={user:1,reviewer:2,admin:3};if((e[d.profile.role]||0)<e[t])return null}return(0,l.jsx)(l.Fragment,{children:s})}},12381:function(e,s,t){"use strict";t.d(s,{z:function(){return a}});var l=t(57437),i=t(2265),n=t(93448);let a=i.forwardRef((e,s)=>{let{className:t,variant:i="default",size:a="default",...r}=e;return(0,l.jsx)("button",{className:(0,n.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50","default"===i&&"bg-primary text-primary-foreground hover:bg-primary/90","outline"===i&&"border border-input bg-background hover:bg-accent hover:text-accent-foreground","ghost"===i&&"hover:bg-accent hover:text-accent-foreground","link"===i&&"text-primary underline-offset-4 hover:underline","default"===a&&"h-10 px-4 py-2","sm"===a&&"h-9 rounded-md px-3","lg"===a&&"h-11 rounded-md px-8","icon"===a&&"h-10 w-10",t),ref:s,...r})});a.displayName="Button"},79820:function(e,s,t){"use strict";t.d(s,{Ol:function(){return r},SZ:function(){return o},Zb:function(){return a},aY:function(){return c},ll:function(){return d}});var l=t(57437),i=t(2265),n=t(93448);let a=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,l.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...i})});a.displayName="Card";let r=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,l.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...i})});r.displayName="CardHeader";let d=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,l.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...i})});d.displayName="CardTitle";let o=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,l.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...i})});o.displayName="CardDescription";let c=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,l.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...i})});c.displayName="CardContent"},40279:function(e,s,t){"use strict";t.d(s,{I:function(){return a}});var l=t(57437),i=t(2265),n=t(93448);let a=i.forwardRef((e,s)=>{let{className:t,type:i,...a}=e;return(0,l.jsx)("input",{type:i,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...a})});a.displayName="Input"},14362:function(e,s,t){"use strict";t.d(s,{AuthProvider:function(){return d},a:function(){return o}});var l=t(57437),i=t(2265),n=t(68123),a=t(5526);let r=(0,i.createContext)(void 0);function d(e){let{children:s}=e,[t,d]=(0,i.useState)(null),[o,c]=(0,i.useState)(!0),u=async()=>{try{let e=await (0,n.cs)();d(e)}catch(e){console.error("Error refreshing user:",e),d(null)}finally{c(!1)}},m=async()=>{await (0,n.w7)(),d(null)};return(0,i.useEffect)(()=>{u();let{data:{subscription:e}}=a.supabase.auth.onAuthStateChange(async(e,s)=>{"SIGNED_IN"===e||"TOKEN_REFRESHED"===e?await u():"SIGNED_OUT"===e&&d(null)});return()=>{e.unsubscribe()}},[]),(0,l.jsx)(r.Provider,{value:{user:t,loading:o,signOut:m,refreshUser:u},children:s})}function o(){let e=(0,i.useContext)(r);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},68123:function(e,s,t){"use strict";t.d(s,{cs:function(){return n},w7:function(){return a},zB:function(){return r}});var l=t(5526);async function i(e){return(0,l.et)(e)}async function n(){let{data:{user:e},error:s}=await l.supabase.auth.getUser();if(s||!e)return null;try{let s=await i(e.id);return{id:e.id,email:e.email,profile:s}}catch(s){return{id:e.id,email:e.email,profile:null}}}async function a(){let{error:e}=await l.supabase.auth.signOut();if(e)throw e;window.location.href="/login"}async function r(e,s){let{data:t,error:i}=await l.supabase.auth.signInWithPassword({email:e,password:s});if(i)throw i;return t}},5526:function(e,s,t){"use strict";t.d(s,{et:function(){return o},supabase:function(){return d}});var l=t(13053),i=t(40257);let n=i.env.NEXT_PUBLIC_SUPABASE_URL||i.env.SUPABASE_URL||"",a=i.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||i.env.SUPABASE_ANON_KEY||"",r=null;if(n&&a)try{r=(0,l.eI)(n,a,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})}catch(e){console.warn("Failed to create Supabase client:",e)}else r=(0,l.eI)("https://placeholder.supabase.co","placeholder-key",{auth:{autoRefreshToken:!1,persistSession:!1,detectSessionInUrl:!1}});let d=r;async function o(e){if(!d||!i.env.NEXT_PUBLIC_SUPABASE_URL)return null;try{let{data:s,error:t}=await d.from("profiles").select("role, email").eq("id",e).single();if(t)throw t;return s}catch(e){return null}}},93448:function(e,s,t){"use strict";t.d(s,{cn:function(){return n}});var l=t(61994),i=t(53335);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,i.m6)((0,l.W)(s))}}},function(e){e.O(0,[115,265,197,971,117,744],function(){return e(e.s=55206)}),_N_E=e.O()}]);