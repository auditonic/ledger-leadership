(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{61889:function(e,t,n){Promise.resolve().then(n.t.bind(n,2778,23)),Promise.resolve().then(n.bind(n,14362))},14362:function(e,t,n){"use strict";n.d(t,{AuthProvider:function(){return o},a:function(){return l}});var r=n(57437),u=n(2265),i=n(68123),a=n(5526);let s=(0,u.createContext)(void 0);function o(e){let{children:t}=e,[n,o]=(0,u.useState)(null),[l,c]=(0,u.useState)(!0),f=async()=>{try{let e=await (0,i.cs)();o(e)}catch(e){console.error("Error refreshing user:",e),o(null)}finally{c(!1)}},h=async()=>{await (0,i.w7)(),o(null)};return(0,u.useEffect)(()=>{f();let{data:{subscription:e}}=a.supabase.auth.onAuthStateChange(async(e,t)=>{"SIGNED_IN"===e||"TOKEN_REFRESHED"===e?await f():"SIGNED_OUT"===e&&o(null)});return()=>{e.unsubscribe()}},[]),(0,r.jsx)(s.Provider,{value:{user:n,loading:l,signOut:h,refreshUser:f},children:t})}function l(){let e=(0,u.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},68123:function(e,t,n){"use strict";n.d(t,{cs:function(){return i},w7:function(){return a},zB:function(){return s}});var r=n(5526);async function u(e){return(0,r.et)(e)}async function i(){let{data:{user:e},error:t}=await r.supabase.auth.getUser();if(t||!e)return null;try{let t=await u(e.id);return{id:e.id,email:e.email,profile:t}}catch(t){return{id:e.id,email:e.email,profile:null}}}async function a(){let{error:e}=await r.supabase.auth.signOut();if(e)throw e;window.location.href="/login"}async function s(e,t){let{data:n,error:u}=await r.supabase.auth.signInWithPassword({email:e,password:t});if(u)throw u;return n}},5526:function(e,t,n){"use strict";n.d(t,{et:function(){return l},supabase:function(){return o}});var r=n(13053),u=n(40257);let i=u.env.NEXT_PUBLIC_SUPABASE_URL||u.env.SUPABASE_URL||"",a=u.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||u.env.SUPABASE_ANON_KEY||"",s=null;if(i&&a)try{s=(0,r.eI)(i,a,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})}catch(e){console.warn("Failed to create Supabase client:",e)}else s=(0,r.eI)("https://placeholder.supabase.co","placeholder-key",{auth:{autoRefreshToken:!1,persistSession:!1,detectSessionInUrl:!1}});let o=s;async function l(e){if(!o||!u.env.NEXT_PUBLIC_SUPABASE_URL)return null;try{let{data:t,error:n}=await o.from("profiles").select("role, email").eq("id",e).single();if(n)throw n;return t}catch(e){return null}}},2778:function(){}},function(e){e.O(0,[461,115,971,117,744],function(){return e(e.s=61889)}),_N_E=e.O()}]);